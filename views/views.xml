<odoo>
  <data>
    <!-- explicit list view definition -->
<!--
    <record model="ir.ui.view" id="obrador.list">
      <field name="name">Obrador list</field>
      <field name="model">obrador.obrador</field>
      <field name="arch" type="xml">
        <tree>
          <field name="name"/>
          <field name="value"/>
          <field name="value2"/>
        </tree>
      </field>
    </record>
-->

    <!-- actions opening views on models -->
    <!--
    <record model="ir.actions.act_window" id="obrador.action_window_recetas">
      <field name="name">Recetas</field>
      <field name="res_model">obrador.recetas</field>
      <field name="view_mode">tree,form</field>
    </record>
    -->
     <record model="ir.actions.act_window" id="obrador.action_window_recetas">
      <field name="name">Recetas</field>
      <field name="res_model">obrador.recetas</field>
      <field name="view_mode">tree,form</field> 
    </record>

    <record model="ir.ui.view" id="obrador.recetas_tree_view">
      <field name="name">Recetas</field>
      <field name="model">obrador.recetas</field>
      <field name="arch" type="xml">
        <tree>
          <field name="name" string = "Nombre" />
          <field name="categ" string = "Categoria"/>
          <field name= "alergenos_ids" string = "Alérgenos"  widget = "many2many_tags"/>
        </tree>
      </field>
    </record>

    <record model="ir.ui.view" id="obrador.recetas_form_view">
      <field name="name">Recetario</field>
      <field name="model">obrador.recetas</field>
      <field name="arch" type="xml">
        <form>
          <sheet>
            <group>
              <group>
                <field name = "name"/>
                <field name = "tiempo"/>
                <field name = "temp"/>
              </group>
              <group>
                <field name = "cant"/>
                <field name = "peso"/>
                <field name = "categ"/>
              </group>
              <group> 
                <field name="notas"/>
              </group>
              <group>
                <!-- Lista de checkboxes para seleccionar varios alergenos-->
                <field name = "alergenos_ids" widget= "many2many_checkboxes" required = "1"/>
              </group>
            </group>
          </sheet>
        </form>
      </field>
    </record>


    <!--Vista de lista solo, sin formulario, editable desde la lista-->
    <record model="ir.actions.act_window" id="obrador.action_window_alergenos">
      <field name="name">Alérgenos</field>
      <field name="res_model">obrador.alergenos</field>
      <field name="view_mode">tree</field>
    </record>

    <record model="ir.ui.view" id="obrador.alergenos_tree_view">
      <field name="name">Alergenos</field>
      <field name="model">obrador.alergenos</field>
      <field name="arch" type="xml">
        <tree editable="bottom">
          <field name="name" editable = "true"/>
          <field name="recetas_count"/>
        </tree>
      </field>
    </record>





    <record model="ir.actions.act_window" id="obrador.action_window_remanentes">
      <field name="name">Remanentes</field>
      <field name="res_model">obrador.remanentes</field>
      <field name="view_mode">tree,form</field>
    </record>
    <record model="ir.actions.act_window" id="obrador.action_window_graficas">
      <field name="name">Gráficas</field>
      <field name="res_model">obrador.graficas</field>
      <field name="view_mode">tree,form</field>
    </record>


    <!-- server action to the one above -->
<!--
    <record model="ir.actions.server" id="obrador.action_server">
      <field name="name">Obrador server</field>
      <field name="model_id" ref="model_obrador_obrador"/>
      <field name="state">code</field>
      <field name="code">
        action = {
          "type": "ir.actions.act_window",
          "view_mode": "tree,form",
          "res_model": model._name,
        }
      </field>
    </record>
-->

    <!-- Top menu item -->

    <menuitem name="Obrador" id="obrador.menu_root"/>

    <!-- menu categories -->

    <menuitem name="Recetario" id="obrador.menu_1" parent="obrador.menu_root"/>
    <menuitem name="Sobras" id="obrador.menu_2" parent="obrador.menu_root"/>

    <!-- actions -->

    <menuitem name="Recetas" id="obrador.menu_1_recetas" parent="obrador.menu_1"
              action="obrador.action_window_recetas"/>
    <menuitem name="Alergenos" id="obrador.menu_1_alergenos" parent="obrador.menu_1"
              action="obrador.action_window_alergenos"/>



    <menuitem name="Remanentes" id="obrador.menu_2_remanentes" parent="obrador.menu_2"
              action="obrador.action_window_remanentes"/>
    <menuitem name="Gráficas" id="obrador.menu_2_graficas" parent="obrador.menu_2"
              action="obrador.action_window_graficas"/>

  </data>
</odoo>